"use strict";var Slider=function(){var e="c68800a17a432a39511ddfe44c78a500",t=document.body.querySelector(".app"),n=document.createElement("div"),o=document.body.querySelector(".lightbox"),r=document.body.querySelector(".lightbox__button--close"),i=document.body.querySelector(".lightbox__button--prev"),c=document.body.querySelector(".lightbox__button--next"),s=document.body.querySelector(".lightbox__image"),u=document.body.querySelector(".lightbox__background"),a=document.body.querySelector(".search__input"),d=document.body.querySelector(".search__button--submit"),l=document.body.querySelector(".spinner__wrapper"),f="";n.classList.add("image__container");var m=function(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){200===o.status&&t(JSON.parse(o.response)),n(o.statusText)},o.onerror=function(e){return n(Error("Network Error: "+e))},o.send()})},h=function(e){if(e.sizes.size.length>8){var t=e.sizes.size[4].source,n=e.sizes.size[5].source,o=e.sizes.size[6].source,r={small:t,medium:n,large:o};return r}},y=function(e,t,n,o){0===t?n.classList.add("hide"):t===e.length-1?o.classList.add("hide"):(n.classList.remove("hide"),o.classList.remove("hide"))},p=function(){o.classList.add("hide"),window.removeEventListener("keydown",v)},v=function(e){27===e.keyCode?p():37===e.keyCode&&"hide"!==i.classList[2]?i.click():39===e.keyCode&&"hide"!==c.classList[2]&&c.click()},b=function(e,t,n){return e.onclick=function(){var e=t;window.addEventListener("keydown",v),r.onclick=function(){p()},u.onclick=function(){p()},i.onclick=function(){e--,y(n,e,i,c),s.src=n[e].large},c.onclick=function(){e++,y(n,e,i,c),s.src=n[e].large},y(n,e,i,c),s.src=n[t].large,o.classList.remove("hide")},e},k=function(e){var t=document.createElement("div");return t.style.backgroundImage="url('"+e.small+"')",t.classList.add("image__thumbnail--container"),t},_=function(o){return l.classList.remove("hide"),Promise.resolve(m("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+e+"&format=json&nojsoncallback=1&text="+o+"&sort=relevance")).then(function(t){var n=t.photos.photo.map(function(t){return"https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+e+"&format=json&nojsoncallback=1&photo_id="+t.id});return n}).then(function(e){var t=e.map(function(e){return Promise.resolve(m(e)).then(function(e){var t=e,n=h(t);return n})});return Promise.all(t)}).then(function(e){e=e.filter(function(e){return"undefined"!=typeof e}),e.forEach(function(e,t,o){if("undefined"!=typeof e){var r=k(e),i=b(r,t,o);n.appendChild(i)}}),l.classList.add("hide"),t.appendChild(n)})},g=function(){for(;n.hasChildNodes();)n.removeChild(n.lastChild)},L=function(){a.addEventListener("keydown",function(e){13===e.keyCode&&(g(),_(e.target.value))}),d.onclick=function(){f=a.value,g(),_(f)}},S=function(){L(),_("patterns")};return{init:S}}();ES6Promise.polyfill(),Slider.init();